# InvokeAI OpenAI Images Shim configuration
#
# This file is installed to:
#   /var/lib/invokeai/openai_images_shim/shim.env
# and is read by systemd via EnvironmentFile in invokeai-openai-images-shim.service.
#
# After editing on the host:
#   sudo systemctl restart invokeai-openai-images-shim

# Primary mode
SHIM_MODE=invokeai_queue

# InvokeAI upstream
INVOKEAI_BASE_URL=http://127.0.0.1:9090
INVOKEAI_QUEUE_ID=default

# Default model name used when the OpenAI request omits `model`
INVOKEAI_DEFAULT_MODEL=Juggernaut XL v9

# InvokeAI 6.x queue validation tends to be strict; ids are most compatible
SHIM_MODEL_INPUT_MODE=id

# Some InvokeAI versions expect queued invocation inputs under an `inputs` object,
# others expect them flattened at the top-level of each invocation.
# If you see MissingInputException for a field that *is* present in the graph,
# try forcing:
#   SHIM_GRAPH_INPUTS_FORMAT=flat
SHIM_GRAPH_INPUTS_FORMAT=auto

# Graph template + output node
SHIM_GRAPH_TEMPLATE_PATH=/var/lib/invokeai/openai_images_shim/graph_template.json
SHIM_OUTPUT_NODE_ID=63e91020-83b2-4f35-b174-ad9692aabb48

# Optional: write the exact enqueued graph for debugging
# SHIM_DEBUG_GRAPH_PATH=/var/lib/invokeai/openai_images_shim/debug_graph.json
